---
title: Using agent state in React
description: Getting and setting state from your components
---

<Frame>
  <img src="/images/coagents/intermediate-state.gif" />
</Frame>

If you need even greater control over how your agent state is managed, you can use the `useCoAgent` hook, which gives you access to the state and a function to update it similar to how you'd use the `useState` hook in React:

```tsx
const { state: weatherAgentState, setState: setWeatherAgentState } = useCoAgent<WeatherAgentState>({
  name: "basic_agent",
  // optionally provide an initial state
  initialState: { input: "New York City" }
});

// Elsewhere in your component code
const handleCityClick = (event) => {
  const newCityName = event.target.value;
  setState({ ...state, input: newCityName });
}

<button type="button" 
  onClick={handleCityClick} 
  value="San Francisco">
  San Francisco
</button>
<button type="button" 
  onClick={handleCityClick} 
  value="Denver">
  Denver
</button>
```

The `weatherAgentState` object will update with the latest state from your agent even while updates are streaming in from the agent, making it easy to show your users the current state of the agent as it runs.

You can even pass your own state management functions to the agent, for maximum control over how the frontend and backend interact.

```tsx
useCoAgent<WeatherAgentState>({
  name: "basic_agent",

  // provide your own state management
  state: weatherAgentState,
  setState: setWeatherAgentState,
});
```